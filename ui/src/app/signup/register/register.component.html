<!-- <app-register-nav-bar [user]="user" [button]="button"></app-register-nav-bar> -->

<mat-horizontal-stepper [linear]="isLinear" #stepper>
    <mat-step [stepControl]="personalFormGroup">
      <mat-card class="center-content">
      <mat-card-content>
      <form [formGroup]="personalFormGroup">
        <ng-template matStepLabel>Personal Details</ng-template>
        <div class="element">
          <mat-form-field>
            <mat-label>First Name</mat-label>
            <input matInput placeholder="First name" [(ngModel)]="user.firstName" 
              formControlName="firstNameCtrl" required>
          </mat-form-field>
        </div>
        <div class="element">
          <mat-form-field>
              <mat-label>Last Name</mat-label>
              <input matInput placeholder="Last name" [(ngModel)]="user.lastName"
              formControlName="lastNameCtrl" required>
          </mat-form-field>
        </div>
        <div class="element">
          <mat-form-field>
              <mat-label>Phone Number</mat-label>
              <input matInput placeholder="1234567890" [(ngModel)]="user.phoneNum"
               formControlName="phoneNumberCtrl" required maxlength="10" minlength="10">
          </mat-form-field>
        </div>
        <div class="element">
          <mat-form-field>
              <mat-label>Email ID</mat-label>
              <input matInput placeholder="Ex. pat@example.com" [(ngModel)]="user.email"
               formControlName="emailIDCtrl" required>
              <mat-hint>Enter your email id</mat-hint>
          </mat-form-field>
        </div>
        <div>
          <mat-form-field>
              <input matInput [matDatepicker]="myDatepicker" [(ngModel)]="user.dob" formControlName="dobCtrl">
              <mat-datepicker-toggle matSuffix [for]="myDatepicker"></mat-datepicker-toggle>
              <mat-datepicker #myDatepicker></mat-datepicker>
          </mat-form-field>
        </div>
        <div>
          <button mat-raised-button color="primary" matStepperNext>Next</button>
        </div>
      </form>
    </mat-card-content>
    </mat-card>
    </mat-step>
  
  <div>
    <mat-step [stepControl]="addressFormGroup">
      <mat-card class="center-content">
        <mat-card-content>
      <form [formGroup]="addressFormGroup">
        <ng-template matStepLabel>Address Details</ng-template>
        <div class="element">
          <mat-form-field>
            <mat-label>Address Line 1</mat-label>
            <input matInput formControlName="addressLine1Ctrl" placeholder="Ex. 1 Main St, New York, NY"
                  required>
            <mat-hint>Enter the street name</mat-hint>
          </mat-form-field>
        </div>
        <div class="element">
          <mat-form-field>
            <mat-label>Address Line 2</mat-label>
            <input matInput formControlName="addressLine2Ctrl" [(ngModel)]="user.addressLine1"
            placeholder="Apt, Building, Block No."
                  required>
            <mat-hint>Enter your Apt, block, building number.</mat-hint>
          </mat-form-field>
        </div>
        <div class="element">
          <mat-form-field>
            <mat-label>City</mat-label>
            <input matInput formControlName="cityCtrl" [(ngModel)]="user.city"
            placeholder="Ex. New York City, Boston"
                  required>
            <mat-hint>Enter your City</mat-hint>
          </mat-form-field>
        </div>
        <div class="element">
          <mat-form-field>
            <mat-label>State</mat-label>
            <mat-select (change)="eventSelection($event.value)" formControlName="stateCtrl" required>
              <mat-option *ngFor="let state of states" [value]="state.value" >
                {{state.viewValue}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="element">
          <mat-form-field>
            <mat-label>Zipcode</mat-label>
            <input matInput formControlName="zipCtrl" [(ngModel)]="user.zip" maxlength="5" minlength="5"
            placeholder="Ex. 12345"
                  required>
            <mat-hint>Enter your ZipCode</mat-hint>
          </mat-form-field>
        </div>
        <div class="element">
          <button mat-raised-button color="primary" matStepperPrevious>Back</button>
          <button mat-raised-button color="primary" matStepperNext>Next</button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
    </mat-step>

  </div>
  <div >
    <mat-step [stepControl]="credentialsFormGroup">
      <mat-card class="center-content">
        <mat-card-content>
      <form [formGroup]="credentialsFormGroup">
        <ng-template matStepLabel>Set your Password</ng-template>
        <div class="element">
          <mat-form-field>
            <input matInput placeholder="Password" [type]="hide ? 'password' : 'text'" formControlName="password" required>
            <mat-icon matSuffix (click)="hide = !hide">{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
            <mat-hint *ngIf="!passwordInput.value">Enter your password</mat-hint>
          </mat-form-field>
        </div>
        <div class="element">
          <button mat-raised-button color="primary" matStepperPrevious>Back</button>
          <button mat-raised-button color="primary" matStepperNext>Next</button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
    </mat-step>
  </div>
  <div>
    <mat-step [stepControl]="ssnFormGroup">
      <mat-card  class="center-content">
        <mat-card-content>
      <form [formGroup]="ssnFormGroup">
        <ng-template matStepLabel>SSN Details</ng-template>
        <div class="element">
          <mat-form-field>
            <input matInput placeholder="SSN" [type]="hideSSN ? 'password' : 'text'" 
            formControlName="ssn"  minlength="9" maxlength="9"required>
            <mat-icon matSuffix (click)="hideSSN = !hideSSN">{{hideSSN ? 'visibility_off' : 'visibility'}}</mat-icon>
            <mat-hint *ngIf="!ssnInput.value">Enter your SSN</mat-hint>
          </mat-form-field>
        </div>
        <div class="element">
          <button mat-raised-button color="primary" matStepperPrevious>Back</button>
          <button mat-raised-button color="primary" matStepperNext>Next</button>
        </div>
      </form>
    </mat-card-content>
    </mat-card>
    </mat-step>
  </div>
  
  <div class="center-content">
    <mat-step>
      <mat-card  class="center-content">
        <mat-card-content>
      <ng-template matStepLabel>Done</ng-template>

      <div *ngIf="userExists">
        <div>Email Id Already Exists</div>
      </div>
      
      <p>You are now done.</p>
      <div>  
        <button mat-raised-button color="primary" matStepperPrevious>Back</button>
        <button mat-raised-button color="primary" (click)="stepper.reset()">Reset</button>
        <button mat-raised-button color="primary" (click)="saveUser()">Submit</button>
      </div>
    </mat-card-content>
  </mat-card>
    </mat-step>
  </div>
  </mat-horizontal-stepper>